<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>PLC - Home</title>
		<link rel="stylesheet" href="cssH/style.css" />
	</head>

	<body>
		<nav class="topnav">
		  <h1>Blockchain and AI based Product LifeCycle</h1>
		  <a class="active" href="index.html">Home</a>
		  <a href="">Manufacturer</a>
		  <a href="">Distributor</a>
		  <a href="">Retailer</a>
		  <a href="">Service Center</a>
		  <a href="">Customer Feedback</a>
		  <button id='loginButton' class="enableEthereumButton">Login with Metamask</button>
		  <p id='userWallet'></p>
		  <script>
            window.userWalletAddress = null
            const loginButton = document.getElementById('loginButton')
            const userWallet = document.getElementById('userWallet')
        
            function toggleButton() {
              if (!window.ethereum) {
                alert("MetaMask is not installed");
                return false
              }
        
              loginButton.addEventListener('click', loginWithMetaMask)
            }
        
            async function loginWithMetaMask() {
              const accounts = await ethereum.request({ method: 'eth_requestAccounts' })
                .catch((e) => {
                  console.error(e.message)
                  return
                })
              if (!accounts) { return }
        
              window.userWalletAddress = accounts[0]
              userWallet.innerText = window.userWalletAddress
              loginButton.innerText = 'Sign out of MetaMask'
        
              loginButton.removeEventListener('click', loginWithMetaMask)
              setTimeout(() => {
                loginButton.addEventListener('click', signOutOfMetaMask)
              }, 200)
            }
        
            function signOutOfMetaMask() {
              window.userWalletAddress = null
              userWallet.innerText = ''
              loginButton.innerText = 'Sign in with MetaMask'
        
              loginButton.removeEventListener('click', signOutOfMetaMask)
              setTimeout(() => {
                loginButton.addEventListener('click', loginWithMetaMask)
              }, 200)
            }
        
            window.addEventListener('DOMContentLoaded', () => {
              toggleButton()
            });
          </script>
		</nav>
		
		<div class="container">
			<form>
				<input type="text" placeholder="Enter the Product ID">
				<button type="submit">Search</button>
			</form>
		</div>

		
		
	</body>

</html>